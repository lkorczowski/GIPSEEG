function [Hd, b, a] = designHighPassFilter_IIR
%DESIGNHIGHPASSFILTER_IIR Returns a discrete-time filter object.

%
% M-File generated by MATLAB(R) 7.7 and the Signal Processing Toolbox 6.10.
%
% Generated on: 04-Jun-2012 11:09:14
%

% Butterworth Highpass filter designed using the BUTTER function.

% All frequency values are in Hz.
Fs = 128;  % Sampling Frequency

Fstop = 0.2;  % Stopband Frequency
Fpass = 2;    % Passband Frequency
Astop = 300;  % Stopband Attenuation (dB)
Apass = 0.1;  % Passband Ripple (dB)

% Calculate the order from the parameters using BUTTORD.
[N,Fc] = buttord(Fpass/(Fs/2), Fstop/(Fs/2), Apass, Astop);

% Calculate the zpk values using the BUTTER function.
[z,p,k] = butter(N, Fc, 'high');
[b,a] = butter(N, Fc, 'high');

% To avoid round-off errors, do not use the transfer function.  Instead
% get the zpk representation and convert it to second-order sections.
[sos_var,g] = zp2sos(z, p, k);
Hd          = dfilt.df2sos(sos_var, g);

% [EOF]
